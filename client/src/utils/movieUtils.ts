import { api } from '../services/api';
import { logger } from './logger';

/**
 * üõ†Ô∏è –£–¢–ò–õ–ò–¢–´ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∏–ª—å–º–∞–º–∏
 * 
 * ‚ùì –ü–û–ß–ï–ú–£ –≠–¢–û UTILS (–∞ –Ω–µ —Ö—É–∫–∏)?
 * - –≠—Ç–æ –ß–ò–°–¢–´–ï –§–£–ù–ö–¶–ò–ò –±–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è
 * - –ú–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –≥–¥–µ —É–≥–æ–¥–Ω–æ (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Ö—É–∫–∏, –¥—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏)
 * - –ù–µ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ React lifecycle
 * - –ü—Ä–æ—Å—Ç–æ –ø–æ–ª—É—á–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
 */

/**
 * üì° –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∏–ª—å–º–µ –∏–∑ TMDB
 * 
 * üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
 * 1. –î–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ –Ω–∞—à–µ–º—É —Å–µ—Ä–≤–µ—Ä—É /movies/details/123
 * 2. –°–µ—Ä–≤–µ—Ä –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ TMDB API –∑–∞ –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
 * 3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å –¥–µ—Ç–∞–ª—è–º–∏ —Ñ–∏–ª—å–º–∞ (–ø–æ—Å—Ç–µ—Ä, –æ–ø–∏—Å–∞–Ω–∏–µ, –∂–∞–Ω—Ä—ã, etc.)
 * 
 * üí° –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–≥–¥–∞:
 * - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª —Ñ–∏–ª—å–º –∏–∑ –ø–æ–∏—Å–∫–∞
 * - –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–µ —Å tmdbId –≤ URL
 * - –ù—É–∂–Ω—ã –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å–º–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
 * 
 * @param tmdbId - ID —Ñ–∏–ª—å–º–∞ –≤ –±–∞–∑–µ TMDB (–Ω–∞–ø—Ä–∏–º–µ—Ä: 550 –¥–ª—è Fight Club)
 * @returns Promise —Å –æ–±—ä–µ–∫—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–∞
 */
export const fetchMovieDetails = async (tmdbId: string | number) => {
  try {
    const response = await api.get(`/movies/details/${tmdbId}`);
    logger.movieLoaded(response.data.title);
    return response.data;
  } catch (error) {
    logger.error('Failed to fetch movie details', error);
    throw error;
  }
};

/**
 * üìã –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —Ñ–∏–ª—å–º –≤ —Å–ø–∏—Å–∫–µ "—Ö–æ—á—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å"
 * 
 * üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
 * 1. –ß–∏—Ç–∞–µ—Ç –º–∞—Å—Å–∏–≤ ID –∏–∑ localStorage['rewatch-watchlist']
 * 2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π tmdbId –≤ —ç—Ç–æ–º –º–∞—Å—Å–∏–≤–µ
 * 3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç true/false
 * 
 * üíæ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ localStorage:
 * 'rewatch-watchlist': '["550", "13", "680"]' (–º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫ —Å ID —Ñ–∏–ª—å–º–æ–≤)
 * 
 * üí° –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
 * - –ü–æ–∫–∞–∑–∞ –±–µ–π–¥–∂–∞ "Added to watchlist" 
 * - –£—Å–ª–æ–≤–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–Ω–æ–ø–æ–∫
 * 
 * @param tmdbId - ID —Ñ–∏–ª—å–º–∞ –≤ TMDB
 * @returns true –µ—Å–ª–∏ —Ñ–∏–ª—å–º –≤ watchlist, false –µ—Å–ª–∏ –Ω–µ—Ç
 */
export const isMovieInWatchlist = (tmdbId: string | number): boolean => {
  // –ü–æ–ª—É—á–∞–µ–º –º–∞—Å—Å–∏–≤ ID –∏–∑ localStorage, –µ—Å–ª–∏ –Ω–µ—Ç - –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
  const watchlist = JSON.parse(localStorage.getItem('rewatch-watchlist') || '[]');
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ ID (–ø—Ä–∏–≤–æ–¥–∏–º –∫ —Å—Ç—Ä–æ–∫–µ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)
  const isInList = watchlist.includes(tmdbId.toString());
  
  console.log(`üìã Checking watchlist for ${tmdbId}:`, isInList);
  return isInList;
};

/**
 * ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å–º –≤ —Å–ø–∏—Å–æ–∫ "—Ö–æ—á—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å"
 * 
 * üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
 * 1. –ß–∏—Ç–∞–µ—Ç —Ç–µ–∫—É—â–∏–π watchlist –∏–∑ localStorage
 * 2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ—Ç –ª–∏ —Ñ–∏–ª—å–º–∞ —É–∂–µ –≤ —Å–ø–∏—Å–∫–µ (–∏–∑–±–µ–≥–∞–µ–º –¥—É–±–ª–∏–∫–∞—Ç–æ–≤)
 * 3. –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π ID –≤ –º–∞—Å—Å–∏–≤
 * 4. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ –æ–±—Ä–∞—Ç–Ω–æ –≤ localStorage
 * 
 * üí° –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–≥–¥–∞:
 * - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "Add to Watchlist"
 * - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é —Ñ–∏–ª—å–º–∞
 * 
 * @param tmdbId - ID —Ñ–∏–ª—å–º–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
 */
export const addToWatchlist = (tmdbId: string | number): void => {
  // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫
  const watchlist = JSON.parse(localStorage.getItem('rewatch-watchlist') || '[]');
  
  // –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ
  if (!watchlist.includes(tmdbId.toString())) {
    watchlist.push(tmdbId.toString());
    localStorage.setItem('rewatch-watchlist', JSON.stringify(watchlist));
    console.log(`‚ûï Added to watchlist: ${tmdbId}`);
  } else {
    console.log(`‚ö†Ô∏è Movie ${tmdbId} already in watchlist`);
  }
};

/**
 * ‚ûñ –£–¥–∞–ª–∏—Ç—å —Ñ–∏–ª—å–º –∏–∑ —Å–ø–∏—Å–∫–∞ "—Ö–æ—á—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å"
 * 
 * üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
 * 1. –ß–∏—Ç–∞–µ—Ç —Ç–µ–∫—É—â–∏–π watchlist
 * 2. –§–∏–ª—å—Ç—Ä—É–µ—Ç –º–∞—Å—Å–∏–≤, –∏—Å–∫–ª—é—á–∞—è —É–∫–∞–∑–∞–Ω–Ω—ã–π ID
 * 3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤
 * 
 * @param tmdbId - ID —Ñ–∏–ª—å–º–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
 */
export const removeFromWatchlist = (tmdbId: string | number): void => {
  const watchlist = JSON.parse(localStorage.getItem('rewatch-watchlist') || '[]');
  const updatedWatchlist = watchlist.filter((id: string) => id !== tmdbId.toString());
  localStorage.setItem('rewatch-watchlist', JSON.stringify(updatedWatchlist));
  console.log(`‚ûñ Removed from watchlist: ${tmdbId}`);
};

/**
 * üìÖ –ò–∑–≤–ª–µ—á—å –≥–æ–¥ –∏–∑ –¥–∞—Ç—ã –≤—ã—Ö–æ–¥–∞ —Ñ–∏–ª—å–º–∞
 * 
 * üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
 * 1. –ü–æ–ª—É—á–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –¥–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ "2023-05-12"
 * 2. –°–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç Date –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –≥–æ–¥
 * 3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ–¥ –∫–∞–∫ —Å—Ç—Ä–æ–∫—É –∏–ª–∏ "Unknown year"
 * 
 * üí° –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
 * - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–æ–¥–∞ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö —Ñ–∏–ª—å–º–æ–≤
 * - –ö—Ä–∞—Ç–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ —Å–ø–∏—Å–∫–∞—Ö
 * 
 * @param releaseDate - –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ "YYYY-MM-DD" –∏–ª–∏ null
 * @returns –ì–æ–¥ –∫–∞–∫ —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ "Unknown year"
 */
export const getMovieYear = (releaseDate: string | null): string => {
  if (!releaseDate) {
    return 'Unknown year';
  }
  
  try {
    const year = new Date(releaseDate).getFullYear().toString();
    console.log(`üìÖ Extracted year ${year} from date ${releaseDate}`);
    return year;
  } catch (error) {
    console.warn(`‚ö†Ô∏è Invalid date format: ${releaseDate}`);
    return 'Unknown year';
  }
};

/**
 * üñºÔ∏è –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π URL –¥–ª—è –ø–æ—Å—Ç–µ—Ä–∞ —Ñ–∏–ª—å–º–∞ –∏–∑ TMDB
 * 
 * üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
 * 1. –ü–æ–ª—É—á–∞–µ—Ç –ø—É—Ç—å –∫ –ø–æ—Å—Ç–µ—Ä—É –æ—Ç TMDB (–Ω–∞–ø—Ä–∏–º–µ—Ä: "/abc123.jpg")
 * 2. –î–æ–±–∞–≤–ª—è–µ—Ç –±–∞–∑–æ–≤—ã–π URL TMDB –∏ —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
 * 3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π URL –¥–ª—è <img src="">
 * 
 * üìê –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã:
 * - w92: –º–∞–ª–µ–Ω—å–∫–∏–µ –ø—Ä–µ–≤—å—é (92px —à–∏—Ä–∏–Ω–∞)
 * - w154: —Å—Ä–µ–¥–Ω–∏–µ –ø—Ä–µ–≤—å—é (154px)
 * - w185: –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ —Å–ø–∏—Å–∫–∞—Ö (185px)
 * - w342: –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (342px)
 * - w500: –±–æ–ª—å—à–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (500px)
 * - w780: –æ—á–µ–Ω—å –±–æ–ª—å—à–∏–µ (780px)
 * - original: –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä
 * 
 * üí° –í—ã–±–æ—Ä —Ä–∞–∑–º–µ—Ä–∞ –≤–ª–∏—è–µ—Ç –Ω–∞:
 * - –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ (–º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä = –±—ã—Å—Ç—Ä–µ–µ)
 * - –ö–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
 * - –¢—Ä–∞—Ñ–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
 * 
 * @param posterPath - –ü—É—Ç—å –∫ –ø–æ—Å—Ç–µ—Ä—É –æ—Ç TMDB API (–Ω–∞–ø—Ä–∏–º–µ—Ä: "/abc123.jpg")
 * @param size - –†–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é w500)
 * @returns –ü–æ–ª–Ω—ã–π URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
 */
export const getTMDBPosterUrl = (posterPath: string, size: string = 'w500'): string => {
  const fullUrl = `https://image.tmdb.org/t/p/${size}${posterPath}`;
  console.log(`üñºÔ∏è Generated poster URL (${size}):`, fullUrl);
  return fullUrl;
};

/**
 * üìú –ü–ª–∞–≤–Ω–æ –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫ —ç–ª–µ–º–µ–Ω—Ç—É
 * 
 * üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
 * 1. –ñ–¥–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100ms)
 * 2. –ù–∞—Ö–æ–¥–∏—Ç —ç–ª–µ–º–µ–Ω—Ç –ø–æ ID
 * 3. –ü–ª–∞–≤–Ω–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç –∫ –Ω–µ–º—É —Å—Ç—Ä–∞–Ω–∏—Ü—É
 * 
 * ‚è±Ô∏è –ó–∞—á–µ–º –∑–∞–¥–µ—Ä–∂–∫–∞?
 * - –≠–ª–µ–º–µ–Ω—Ç –º–æ–∂–µ—Ç –µ—â–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è
 * - DOM –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –≥–æ—Ç–æ–≤
 * - –ê–Ω–∏–º–∞—Ü–∏–∏ –º–æ–≥—É—Ç –º–µ—à–∞—Ç—å
 * 
 * üí° –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–≥–¥–∞:
 * - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª —Ñ–∏–ª—å–º –∏–∑ –ø–æ–∏—Å–∫–∞ ‚Üí –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –∫–∞—Ä—Ç–æ—á–∫–µ
 * - –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Ñ–æ—Ä–º–µ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞
 * - –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–ª–∏–Ω–Ω—ã–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
 * 
 * @param elementId - ID —ç–ª–µ–º–µ–Ω—Ç–∞ –¥–ª—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ (–±–µ–∑ #)
 * @param delay - –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
 */
export const scrollToElement = (elementId: string, delay: number = 100): void => {
  console.log(`üìú Scheduling scroll to #${elementId} in ${delay}ms`);
  
  setTimeout(() => {
    const element = document.getElementById(elementId);
    if (element) {
      console.log(`‚úÖ Scrolling to element:`, element);
      element.scrollIntoView({ 
        behavior: 'smooth',    // –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è
        block: 'nearest'       // –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
      });
    } else {
      console.warn(`‚ö†Ô∏è Element with ID "${elementId}" not found`);
    }
  }, delay);
};

/**
 * üé≠ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å ID –∂–∞–Ω—Ä–æ–≤ TMDB –≤ –Ω–∞–∑–≤–∞–Ω–∏—è
 * 
 * üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
 * 1. –ü–æ–ª—É—á–∞–µ—Ç –º–∞—Å—Å–∏–≤ genre_ids –æ—Ç TMDB (–Ω–∞–ø—Ä–∏–º–µ—Ä: [28, 12, 16])
 * 2. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–∞–ø–ø–∏–Ω–≥ ID ‚Üí –Ω–∞–∑–≤–∞–Ω–∏–µ –∂–∞–Ω—Ä–∞
 * 3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫ —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –∂–∞–Ω—Ä–æ–≤
 * 
 * üìã –ú–∞–ø–ø–∏–Ω–≥ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö ID –∂–∞–Ω—Ä–æ–≤ TMDB:
 * - 28: Action
 * - 12: Adventure
 * - 16: Animation
 * - 35: Comedy
 * - 80: Crime
 * - 99: Documentary
 * - 18: Drama
 * - 10751: Family
 * - 14: Fantasy
 * - 36: History
 * - 27: Horror
 * - 10402: Music
 * - 9648: Mystery
 * - 10749: Romance
 * - 878: Science Fiction
 * - 10770: TV Movie
 * - 53: Thriller
 * - 10752: War
 * - 37: Western
 * 
 * üí° –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
 * - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∂–∞–Ω—Ä–æ–≤ –≤ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è—Ö
 * - –§–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –∂–∞–Ω—Ä–∞–º
 * - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∂–∞–Ω—Ä–∞–º
 * 
 * @param genreIds - –ú–∞—Å—Å–∏–≤ ID –∂–∞–Ω—Ä–æ–≤ –æ—Ç TMDB (–Ω–∞–ø—Ä–∏–º–µ—Ä: [28, 12])
 * @param maxGenres - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–∞–Ω—Ä–æ–≤ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2)
 * @returns –ú–∞—Å—Å–∏–≤ –Ω–∞–∑–≤–∞–Ω–∏–π –∂–∞–Ω—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä: ["Action", "Adventure"])
 */
export const getGenresFromIds = (genreIds: number[] | undefined, maxGenres: number = 2): string[] => {
  if (!genreIds || !Array.isArray(genreIds) || genreIds.length === 0) {
    return [];
  }

  // –ú–∞–ø–ø–∏–Ω–≥ ID –∂–∞–Ω—Ä–æ–≤ TMDB –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏—è (–∞–Ω–≥–ª–∏–π—Å–∫–∏–µ, –º–æ–∂–Ω–æ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–∑–∂–µ)
  const genreMap: { [key: number]: string } = {
    28: 'Action',
    12: 'Adventure',
    16: 'Animation',
    35: 'Comedy',
    80: 'Crime',
    99: 'Documentary',
    18: 'Drama',
    10751: 'Family',
    14: 'Fantasy',
    36: 'History',
    27: 'Horror',
    10402: 'Music',
    9648: 'Mystery',
    10749: 'Romance',
    878: 'Science Fiction',
    10770: 'TV Movie',
    53: 'Thriller',
    10752: 'War',
    37: 'Western'
  };

  const genres = genreIds
    .map(id => genreMap[id])
    .filter(genre => genre !== undefined) // –£–±–∏—Ä–∞–µ–º –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∂–∞–Ω—Ä—ã
    .slice(0, maxGenres); // –ë–µ—Ä–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ maxGenres

  return genres;
};
